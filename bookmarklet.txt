javascript:(function(){if(window.__ITA_ON__){return;}window.__ITA_ON__=true;const css=`#itaBar{position:fixed;top:10px;left:50%;transform:translateX(-50%);background:#111;color:#fff;padding:6px 8px;border-radius:10px;display:flex;gap:6px;align-items:center;box-shadow:0 4px 14px rgba(0,0,0,.3);z-index:2147483647;font-family:Segoe UI,system-ui,sans-serif}#itaBar button,#itaBar input{border:none;border-radius:8px;padding:6px 10px;background:#1f6feb;color:#fff;cursor:pointer}#itaBar .ghost{background:#333}#itaCanvas{position:fixed;inset:0;z-index:2147483646;cursor:crosshair}`;const style=document.createElement('style');style.textContent=css;document.head.appendChild(style);const bar=document.createElement('div');bar.id='itaBar';bar.innerHTML=`<button id=itaPen>펜</button><button id=itaLine>직선</button><button id=itaText>텍스트</button><label>굵기 <input id=itaW type=range min=1 max=20 value=3></label><input id=itaColor type=color value="#ff4757" style="width:40px;height:30px;padding:0;border-radius:6px"><button id=itaUndo class=ghost>실행취소</button><button id=itaSave>PNG 저장</button><button id=itaExit class=ghost>종료</button>`;document.body.appendChild(bar);const c=document.createElement('canvas');c.id='itaCanvas';document.body.appendChild(c);const ctx=c.getContext('2d');let W=innerWidth,H=innerHeight;c.width=W;c.height=H;let mode='pen',drawing=false,sx=0,sy=0,history=[],buf;const color=()=>document.getElementById('itaColor').value,lw=()=>+document.getElementById('itaW').value;const saveState=()=>history.push(c.toDataURL());function mDown(e){drawing=true;sx=e.clientX;sy=e.clientY;saveState();buf=ctx.getImageData(0,0,W,H);if(mode==='text'){const t=prompt('텍스트 입력:');if(t){ctx.fillStyle=color();ctx.font=(lw()*6+10)+'px Arial';ctx.fillText(t,sx,sy);}drawing=false;}}function mMove(e){if(!drawing)return;if(mode==='pen'){ctx.lineWidth=lw();ctx.lineCap='round';ctx.strokeStyle=color();ctx.lineTo(e.clientX,e.clientY);ctx.stroke();}else if(mode==='line'){ctx.putImageData(buf,0,0);ctx.beginPath();ctx.lineWidth=lw();ctx.strokeStyle=color();ctx.moveTo(sx,sy);ctx.lineTo(e.clientX,e.clientY);ctx.stroke();}}function mUp(){drawing=false;}c.addEventListener('mousedown',e=>{ctx.beginPath();mDown(e);});c.addEventListener('mousemove',mMove);c.addEventListener('mouseup',mUp);document.getElementById('itaPen').onclick=()=>mode='pen';document.getElementById('itaLine').onclick=()=>mode='line';document.getElementById('itaText').onclick=()=>mode='text';document.getElementById('itaUndo').onclick=()=>{if(!history.length)return;const i=new Image();i.onload=()=>ctx.drawImage(i,0,0);i.src=history.pop();};document.getElementById('itaSave').onclick=()=>{const a=document.createElement('a');a.download='web_annotation.png';a.href=c.toDataURL('image/png');a.click();};document.getElementById('itaExit').onclick=()=>{bar.remove();c.remove();style.remove();window.__ITA_ON__=false;};})();